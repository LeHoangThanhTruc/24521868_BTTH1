/* Äá» bÃ i
BÃ i táº­p 6: Viáº¿t chÆ°Æ¡ng trÃ¬nh quáº£n lÃ½ thÃ´ng tin cá»§a nhiá»u há»c sinh, bao gá»“m há» tÃªn,
Ä‘iá»ƒm toÃ¡n, Ä‘iá»ƒm vÄƒn, vÃ  thÃªm Ä‘iá»ƒm ngoáº¡i ngá»¯. ChÆ°Æ¡ng trÃ¬nh cáº§n thá»±c hiá»‡n cÃ¡c chá»©c
nÄƒng sau:
1. Nháº­p thÃ´ng tin cho n há»c sinh, bao gá»“m:
- Há» tÃªn (pháº£i kiá»ƒm tra Ä‘á»™ dÃ i vÃ  Ä‘á»‹nh dáº¡ng, khÃ´ng chá»©a kÃ½ tá»± sá»‘).
- Äiá»ƒm ToÃ¡n, VÄƒn vÃ  Ngoáº¡i ngá»¯ (pháº£i lÃ  sá»‘ thá»±c trong khoáº£ng tá»« 0 Ä‘áº¿n 10,
náº¿u nháº­p sai pháº£i yÃªu cáº§u nháº­p láº¡i).
2. TÃ­nh Ä‘iá»ƒm trung bÃ¬nh cá»§a má»—i há»c sinh theo cÃ´ng thá»©c:
Äğ‘–á»ƒğ‘š ğ‘¡ğ‘Ÿğ‘¢ğ‘›ğ‘” ğ‘Ã¬ğ‘›â„ =[(2. Äğ‘–á»ƒğ‘š ğ‘‡ğ‘œÃ¡ğ‘›) + Äğ‘–á»ƒğ‘š ğ‘‰Äƒğ‘› + Äğ‘–á»ƒğ‘š ğ´ğ‘›â„]/4
Trong Ä‘Ã³, Ä‘iá»ƒm ToÃ¡n cÃ³ trá»ng sá»‘ cao hÆ¡n.
3. PhÃ¢n loáº¡i há»c sinh dá»±a trÃªn Ä‘iá»ƒm trung bÃ¬nh:
- Xuáº¥t sáº¯c: Äiá»ƒm trung bÃ¬nh tá»« 9 trá»Ÿ lÃªn.
- Giá»i: Äiá»ƒm trung bÃ¬nh tá»« 8 Ä‘áº¿n dÆ°á»›i 9.
- KhÃ¡: Äiá»ƒm trung bÃ¬nh tá»« 6.5 Ä‘áº¿n dÆ°á»›i 8.
- Trung bÃ¬nh: Äiá»ƒm trung bÃ¬nh tá»« 5 Ä‘áº¿n dÆ°á»›i 6.5.
- Yáº¿u: Äiá»ƒm trung bÃ¬nh dÆ°á»›i 5.
4. TÃ¬m kiáº¿m vÃ  xuáº¥t thÃ´ng tin cá»§a há»c sinh cÃ³ Ä‘iá»ƒm trung bÃ¬nh cao nháº¥t.
5. TÃ¬m kiáº¿m há»c sinh theo tÃªn (cho phÃ©p tÃ¬m kiáº¿m vá»›i tá»« khÃ³a khÃ´ng phÃ¢n biá»‡t
hoa thÆ°á»ng vÃ  khÃ´ng cáº§n nháº­p tÃªn Ä‘áº§y Ä‘á»§).
6. Xuáº¥t danh sÃ¡ch há»c sinh cÃ³ Ä‘iá»ƒm toÃ¡n tháº¥p nháº¥t.
YÃªu cáº§u:
- ChÆ°Æ¡ng trÃ¬nh cáº§n cÃ³ giao diá»‡n nháº­p liá»‡u vÃ  xuáº¥t káº¿t quáº£ rÃµ rÃ ng.
- Äáº£m báº£o kiá»ƒm tra tÃ­nh há»£p lá»‡ cá»§a táº¥t cáº£ cÃ¡c dá»¯ liá»‡u Ä‘áº§u vÃ o.
- PhÃ¢n loáº¡i há»c sinh pháº£i chÃ­nh xÃ¡c vÃ  chÆ°Æ¡ng trÃ¬nh pháº£i cÃ³ tÃ­nh linh hoáº¡t khi tÃ¬m
kiáº¿m thÃ´ng tin theo tÃªn.
Äáº§u vÃ o:
- Sá»‘ lÆ°á»£ng há»c sinh: 3
- ThÃ´ng tin tá»«ng há»c sinh bao gá»“m há» tÃªn, Ä‘iá»ƒm toÃ¡n, Ä‘iá»ƒm vÄƒn, Ä‘iá»ƒm ngoáº¡i ngá»¯.
Äáº§u ra:
- Äiá»ƒm trung bÃ¬nh vÃ  phÃ¢n loáº¡i há»c sinh.
- Há»c sinh cÃ³ Ä‘iá»ƒm trung bÃ¬nh cao nháº¥t.
- Káº¿t quáº£ tÃ¬m kiáº¿m theo tÃªn.
- Danh sÃ¡ch há»c sinh cÃ³ Ä‘iá»ƒm toÃ¡n tháº¥p nháº¥t.
*/
/* Máº«u Input vÃ  Output
//Input vÃ  Output láº§n 1
Nhap so luong hoc sinh : 3
Nhap hoc sinh thu 1
Nhap ho va ten : Le HOANG yEn
Nhap diem Toan : 8.0
Nhap diem Van : 7.25
Nhap diem Ngoai Ngu : 3
Nhap hoc sinh thu 2
Nhap ho va ten : %Tran 56Van LE
HO TEN DA NHAP KHONG HOP LE! HO TEN KHONG CHUA KY TU DAC BIET VA SO LUONG KY TU LON HON 1 VA BE HON 50
Nhap ho va ten : Tran &Van Le
HO TEN DA NHAP KHONG HOP LE! HO TEN KHONG CHUA KY TU DAC BIET VA SO LUONG KY TU LON HON 1 VA BE HON 50
Nhap ho va ten : TRan Van LE
Nhap diem Toan : 23
DIEM Toan KHONG HOP LE! 0<=DIEM<=10, MOI NHAP LAI :
Nhap diem Toan : 2.5
Nhap diem Van : 5.75
Nhap diem Ngoai Ngu : 9
Nhap hoc sinh thu 3
Nhap ho va ten : Le Hoang Thanh Truc
Nhap diem Toan : 9.0
Nhap diem Van : -8
DIEM Van KHONG HOP LE! 0<=DIEM<=10, MOI NHAP LAI :
Nhap diem Van : 8.5
Nhap diem Ngoai Ngu : 90
DIEM Ngoai Ngu KHONG HOP LE! 0<=DIEM<=10, MOI NHAP LAI :
Nhap diem Ngoai Ngu : 9.2

Ho va ten : Le Hoang Yen
Diem Toan : 8
Diem Van : 7.25
Diem Ngoai Ngu : 3
Diem trung binh : 6.5625
Kha
Ho va ten : Tran Van Le
Diem Toan : 2.5
Diem Van : 5.75
Diem Ngoai Ngu : 9
Diem trung binh : 4.9375
Yeu
Ho va ten : Le Hoang Thanh Truc
Diem Toan : 9
Diem Van : 8.5
Diem Ngoai Ngu : 9.2
Diem trung binh : 8.925
Gioi

Diem trung binh cao nhat : 8.925
Thong tin hoc sinh co diem trung binh cao nhat :
Ho va ten : Le Hoang Thanh Truc
Diem Toan : 9
Diem Van : 8.5
Diem Ngoai Ngu : 9.2
Diem trung binh : 8.925
Gioi

Nhap ten hoc sinh muon tim kiem : Nhu
KHONG THE TIM THAY BAT CU HOC SINH NAO CO TU KHOA 'Nhu'

Diem Toan thap nhat : 2.5
Danh sach hoc sinh co diem Toan thap nhat :
Ho va ten : Tran Van Le
Diem Toan : 2.5
Diem Van : 5.75
Diem Ngoai Ngu : 9
Diem trung binh : 4.9375
Yeu

//Input vÃ  Output láº§n 2
Nhap so luong hoc sinh : 2
Nhap hoc sinh thu 1
Nhap ho va ten : MY NHAN
Nhap diem Toan : 7.8
Nhap diem Van : 4
Nhap diem Ngoai Ngu : 7.9
Nhap hoc sinh thu 2
Nhap ho va ten : LE van 8 thei
HO TEN DA NHAP KHONG HOP LE! HO TEN KHONG CHUA KY TU DAC BIET VA SO LUONG KY TU LON HON 1 VA BE HON 50
Nhap ho va ten : Le Van Thien*
HO TEN DA NHAP KHONG HOP LE! HO TEN KHONG CHUA KY TU DAC BIET VA SO LUONG KY TU LON HON 1 VA BE HON 50
Nhap ho va ten : Le Van Thien
Nhap diem Toan : 60
DIEM Toan KHONG HOP LE! 0<=DIEM<=10, MOI NHAP LAI :
Nhap diem Toan : 6.0
Nhap diem Van : -2
DIEM Van KHONG HOP LE! 0<=DIEM<=10, MOI NHAP LAI :
Nhap diem Van : 2
Nhap diem Ngoai Ngu : 7.9

Ho va ten : My Nhan
Diem Toan : 7.8
Diem Van : 4
Diem Ngoai Ngu : 7.9
Diem trung binh : 6.875
Kha
Ho va ten : Le Van Thien
Diem Toan : 6
Diem Van : 2
Diem Ngoai Ngu : 7.9
Diem trung binh : 5.475
Trung Binh

Diem trung binh cao nhat : 6.875
Thong tin hoc sinh co diem trung binh cao nhat :
Ho va ten : My Nhan
Diem Toan : 7.8
Diem Van : 4
Diem Ngoai Ngu : 7.9
Diem trung binh : 6.875
Kha

Nhap ten hoc sinh muon tim kiem : Thien
Ho va ten : Le Van Thien
Diem Toan : 6
Diem Van : 2
Diem Ngoai Ngu : 7.9
Diem trung binh : 5.475
Trung Binh

Diem Toan thap nhat : 6
Danh sach hoc sinh co diem Toan thap nhat :
Ho va ten : Le Van Thien
Diem Toan : 6
Diem Van : 2
Diem Ngoai Ngu : 7.9
Diem trung binh : 5.475
Trung Binh
*/
#include<bits/stdc++.h>
using namespace std;
class HocSinh{
private:
    string HoTen;
    double DiemToan, DiemVan, DiemNN, DiemTB;
public:
    void ThietLap(string HoTen,double DiemToan, double DiemVan, double DiemNN, double DiemTB){
        this->HoTen = HoTen;
        this->DiemToan = DiemToan;
        this->DiemVan = DiemVan;
        this->DiemNN = DiemNN;
        this->DiemTB = DiemTB;
    }
    void Nhap(){
        while(true){
            HoTen.clear();
            cout << "Nhap ho va ten : " ;
            getline(cin >> ws, HoTen);
            if ((HoTen.length()>1 && HoTen.length()<50) && TestDigitName()){
                ChuanHoaTen();
            }
            if((HoTen.length()<=1 || HoTen.length()>=50) || !TestDigitName()){
                cout << "HO TEN DA NHAP KHONG HOP LE! HO TEN KHONG CHUA KY TU DAC BIET VA SO LUONG KY TU LON HON 1 VA BE HON 50" << endl;
                continue;
            }
            break;
        }
       NhapDiem(DiemToan, "Toan");
       NhapDiem(DiemVan, "Van");
       NhapDiem(DiemNN, "Ngoai Ngu");
    }
    void NhapDiem(double &diem, const string &tenMon){
        while(true){
            cout << "Nhap diem " << tenMon << " : ";
            cin >> diem;
            if(diem < 0 || diem> 10){
                cout << "DIEM " << tenMon <<" KHONG HOP LE! 0<=DIEM<=10, MOI NHAP LAI : " << endl;
            }
            else {
                break;
            }
        }
    }
    bool TestDigitName()const{
        for (char c : HoTen){
            if (!isalpha(c) && !isspace(c)){//Chá»‰ cháº¥p nháº­n chá»¯ cÃ¡i vÃ  khoáº£ng tráº¯ng
                return false; //false náº¿u há» tÃªn chÆ°a sá»‘ vÃ  kÃ½ tá»± Ä‘áº·c biá»‡t
            }
        }
        return true;
    }
    void ChuanHoaTen(){
       stringstream ss(HoTen);
       string word, result;
       while (ss >> word){
          long long n = word.size();
          word[0] = toupper(word[0]);
          for(long long i = 1;i < n;i++){
              word[i] = tolower(word[i]);
          }
        result += word + " ";
      }
      HoTen = result.substr(0, result.size()-1); //TÃ¡ch láº¥y há» tÃªn, bá» khoáº£ng tráº¯ng á»Ÿ cuá»‘i ra
    }
    string getHoTen()const{
        return HoTen;
    }
    double getDiemToan()const{
        return DiemToan;
    }
    double AvrScore()const{
        return ((2*DiemToan)+DiemVan+DiemNN)/4;
    }
    void PhanLoaiHS()const{
        double dtb = AvrScore();
        if(dtb >= 9){
            cout << "Xuat sac" << endl;
        }
        else if(dtb >= 8 && dtb < 9){
            cout << "Gioi" << endl;
        }
        else if(dtb >=6.5 && dtb<8){
            cout << "Kha" <<endl;
        }
        else if(dtb>=5 && dtb <6.5){
            cout << "Trung Binh" << endl;
        }
        else{
            cout << "Yeu" << endl;
        }
    }
    void XuatThongTinHS() const {
        cout << "Ho va ten : " << HoTen << endl;
        cout << "Diem Toan : " << DiemToan << endl;
        cout << "Diem Van : " << DiemVan << endl;
        cout << "Diem Ngoai Ngu : " << DiemNN << endl;
        cout << "Diem trung binh : " << AvrScore() << endl;
        PhanLoaiHS();
    }
};
class N_HocSinh{
private:
    int spt;
    HocSinh *hs;
public:
    void ThietLap(int spt){
        this->spt=spt;
    }
    int nhap(){
        cout << "Nhap so luong hoc sinh : ";
        cin >> spt;
        if(spt <=0){
            cout << "LOI! SO LUONG HOC SINH PHAI LON HON 0, CHUONG TRINH SE KET THUC!";
            exit(0); //Dá»«ng chÆ°Æ¡ng trÃ¬nh ngay láº­p tá»©c
        }
        hs = new HocSinh[spt];
        for (int i = 0; i<spt;i++){
            cout << "Nhap hoc sinh thu "<< i+1<<endl;
            hs[i].TestDigitName();
            hs[i].Nhap();
        }
    }
    //Äiá»ƒm trung bÃ¬nh vÃ  phÃ¢n loáº¡i há»c sinh.
    void AvrScRank(){
        for (int i = 0; i<spt;i++){
            hs[i].XuatThongTinHS();
        }
    }

    //4. TÃ¬m kiáº¿m vÃ  xuáº¥t thÃ´ng tin cá»§a há»c sinh cÃ³ Ä‘iá»ƒm trung bÃ¬nh cao nháº¥t.
    void MAXdtb(){
         double max_ = hs[0].AvrScore();

         for (int i = 1; i<spt;i++){
            max_= max(max_, hs[i].AvrScore());
         }
         cout << "Diem trung binh cao nhat : " << max_ << endl;
         //Náº¿u 2 ngÆ°á»i cÃ³ cÃ¹ng Ä‘iá»ƒm trung bÃ¬nh cao nháº¥t thÃ¬ sao, ta xuáº¥t danh sÃ¡ch
         cout << "Thong tin hoc sinh co diem trung binh cao nhat : " << endl;
         for (int i = 0; i<spt;i++){
            if(hs[i].AvrScore()==max_){
                 hs[i].XuatThongTinHS();
            }
         }
    }
    //5. TÃ¬m kiáº¿m há»c sinh theo tÃªn (cho phÃ©p tÃ¬m kiáº¿m vá»›i tá»« khÃ³a khÃ´ng phÃ¢n biá»‡t hoa thÆ°á»ng vÃ  khÃ´ng cáº§n nháº­p tÃªn Ä‘áº§y Ä‘á»§).
    void TimKiemHSTheoTen(){
        string key;
        cout << "Nhap ten hoc sinh muon tim kiem : ";
        getline(cin >> ws, key);
        //Chuyen tu khoa tim kiem thanh chu thuong
        string tuKhoaLower = key;
        transform(tuKhoaLower.begin(), tuKhoaLower.end(), tuKhoaLower.begin(), ::tolower);
        bool find_ = false;
        //Chuan hoa ten hs thanh chu thuong de so sanh
        for(int i = 0; i<spt;i++){
            string hoTenLower =hs[i].getHoTen();
            transform(hoTenLower.begin(), hoTenLower.end(), hoTenLower.begin(), ::tolower);
            //KT xem key co xuat hien trong ten khong?
            if(hoTenLower.find(tuKhoaLower) != string::npos){
                hs[i].XuatThongTinHS();
                find_=true;
            }
        }
        if(!find_){
            cout << "KHONG THE TIM THAY BAT CU HOC SINH NAO CO TU KHOA " << "'" << key << "'" <<endl;
        }
    }
    void SlowestMathScoreStudents(){
         double min_ = hs[0].getDiemToan();
         //Tim diem Toan nho nhat
         for (int i = 1; i<spt;i++){
            if(hs[i].getDiemToan()<min_){
                min_ = hs[i].getDiemToan();
            }
         }
         cout << "Diem Toan thap nhat : " << min_ << endl;
         //Xuat danh sach hoc sinh co diem toan nho nhat
         cout << "Danh sach hoc sinh co diem Toan thap nhat : " << endl;
         for (int i = 1; i<spt;i++){
             if(hs[i].getDiemToan() == min_){
                hs[i].XuatThongTinHS();
             }
         }
    }
    //Destructor
    ~N_HocSinh(){
        // Äá»ƒ Ä‘áº£m bÃ o delete[] hs; khÃ´ng lÃ m máº¥t dá»¯ liá»‡u vÃ  bá»‹ nháº­p láº¡i liÃªn tá»¥c cáº§n thÃªm if
        if(hs){
          delete[] hs;
          hs = nullptr;
        }
    }
};

int main()
{

    N_HocSinh HS;
    HS.nhap();
    cout << endl;
    HS.AvrScRank();
    cout << endl;
    HS.MAXdtb();
    cout << endl;
    HS.TimKiemHSTheoTen();
    cout << endl;
    HS.SlowestMathScoreStudents();
    return 0;
}
